import{r as s,j as e,H as f,a as x}from"./app-DbnFtf98.js";import{A as j}from"./AuthenticatedLayout-Cm2Uu4H0.js";import{C as h}from"./Card-BlOdv8M0.js";import{B as l}from"./Button-BJFXitjr.js";/* empty css            */import"./useTheme-B26jrESW.js";import"./GlobalToast-D3YJvptp.js";function C({pendingTransactions:d}){const[b,r]=s.useState(!1),[p,u]=s.useState(null),[i,n]=s.useState(""),[t,c]=s.useState(!1),o=(a,m)=>{m==="paid"?confirm("Yakin ingin mengkonfirmasi pembayaran ini?")&&x.post(`/admin/transaction/${a}/${m}`):(u(a),n(""),r(!0))},k=()=>{if(!i.trim()){alert("Alasan penolakan wajib diisi");return}c(!0),x.post(`/admin/transaction/${p}/reject`,{alasan_penolakan:i},{onFinish:()=>{r(!1),c(!1)}})};return e.jsxs(j,{title:"Verifikasi Pembayaran",children:[e.jsx(f,{title:"Verifikasi Pembayaran"}),d?.length>0?e.jsx("div",{className:"space-y-4",children:d.map(a=>e.jsx(h,{className:"border-0 shadow-sm",children:e.jsx(h.Body,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-lg bg-slate-100 dark:bg-slate-700 overflow-hidden flex-shrink-0 border border-slate-200 dark:border-slate-600",children:a.produk?.lokasi_gambar?e.jsx("img",{src:a.produk.lokasi_gambar_url,alt:a.produk?.nama,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400 text-xs",children:"No img"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-0.5",children:["#INV-",String(a.id).padStart(5,"0")]}),e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-lg",children:a.produk?.nama||"Produk"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["User: ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:a.user?.name})," (",a.user?.email,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide font-bold mb-1",children:"Qty"}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium",children:a.kuantitas})]}),a.produk?.kategori_input==="id_server"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide font-bold mb-1",children:"Game ID"}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium",children:a.game_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide font-bold mb-1",children:"Server ID"}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium",children:a.server_id})]}),a.catatan&&e.jsxs("div",{className:"col-span-2 md:col-span-4",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide font-bold mb-1",children:"Catatan Tambahan"}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium",children:a.catatan})]})]}):e.jsxs("div",{className:"col-span-2 md:col-span-3",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide font-bold mb-1",children:"Catatan"}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium",children:a.catatan})]}),e.jsxs("div",{className:"md:col-span-4 mt-2",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide font-bold mb-1",children:"Total"}),e.jsxs("p",{className:"text-primary-600 dark:text-primary-400 font-bold",children:["Rp ",a.total_harga?.toLocaleString("id-ID",{maximumFractionDigits:0})]})]})]})]}),e.jsxs("div",{className:"lg:w-64 flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-2 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-xs text-center text-slate-400 dark:text-slate-500 mb-2 font-medium",children:"Bukti Pembayaran"}),a.bukti_pembayaran?e.jsxs("a",{href:a.bukti_pembayaran_url,target:"_blank",rel:"noopener noreferrer",className:"block relative group overflow-hidden rounded-lg",children:[e.jsx("img",{src:a.bukti_pembayaran_url,alt:"Bukti",className:"w-full h-32 object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:e.jsx("span",{className:"opacity-0 group-hover:opacity-100 text-white text-xs font-bold bg-black/50 px-2 py-1 rounded",children:"Lihat"})})]}):e.jsx("div",{className:"w-full h-32 bg-slate-200 dark:bg-slate-700 rounded-lg flex items-center justify-center text-slate-400 text-xs",children:"Tidak ada"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"primary",size:"sm",onClick:()=>o(a.id,"paid"),className:"flex-1 justify-center bg-emerald-600 hover:bg-emerald-700 dark:text-white",children:"TERIMA"}),e.jsx(l,{variant:"danger",size:"sm",onClick:()=>o(a.id,"cancelled"),className:"flex-1 justify-center dark:text-white",children:"TOLAK"})]})]})]})})},a.id))}):e.jsx("div",{className:"p-12 text-center bg-white dark:bg-slate-800 rounded-2xl border border-dashed border-slate-300 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-400",children:"Tidak ada pembayaran pending"})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md shadow-2xl p-6 border border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Revisi / Tolak Pembayaran"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Sistem akan mengembalikan stok produk kepada sistem secara otomatis dan mengubah status transaksi pembeli menjadi gagal."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Alasan Penolakan"}),e.jsx("textarea",{value:i,onChange:a=>n(a.target.value),className:"w-full rounded-xl border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white shadow-sm focus:border-red-500 focus:ring-red-500 min-h-[100px]",placeholder:"Contoh: Bukti transfer tidak valid/blur."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(l,{variant:"secondary",onClick:()=>!t&&r(!1),disabled:t,children:"Batal"}),e.jsx(l,{variant:"danger",onClick:k,disabled:t,children:t?"Menolak...":"Konfirmasi Tolak"})]})]})})]})}export{C as default};
