import{b as k,r as t,j as e,H as v,L as N,a as w}from"./app-DbnFtf98.js";import{A as y}from"./AuthenticatedLayout-Cm2Uu4H0.js";import"./Card-BlOdv8M0.js";import{B as d}from"./Button-BJFXitjr.js";/* empty css            */import"./useTheme-B26jrESW.js";import"./GlobalToast-D3YJvptp.js";function P({transaksis:n}){const{flash:r}=k().props,[h,s]=t.useState(!1),[b,u]=t.useState(null),[i,o]=t.useState(5),[c,x]=t.useState(""),[m,l]=t.useState(!1);t.useEffect(()=>{r?.whatsapp_url&&window.open(r.whatsapp_url,"_blank")},[r]);const f=a=>{u(a),o(5),x(""),s(!0)},g=a=>{a.preventDefault(),l(!0),w.post("/rate",{produk_id:b,rating:i,review:c},{preserveScroll:!0,onSuccess:()=>{s(!1),l(!1)},onError:()=>l(!1)})},j=a=>{const p={pending:"bg-amber-50 text-amber-700 border-amber-100 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-800/30",paid:"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800/30",cancelled:"bg-red-50 text-red-700 border-red-100 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800/30",failed:"bg-red-50 text-red-700 border-red-100 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800/30",default:"bg-slate-50 text-slate-700 border-slate-100 dark:bg-slate-700/50 dark:text-slate-400 dark:border-slate-600/50"};return p[a]||p.default};return e.jsxs(y,{title:"Pesanan Saya",children:[e.jsx(v,{title:"Pesanan Saya"}),n?.length>0?e.jsx("div",{className:"space-y-4",children:n.map(a=>e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 sm:p-6 border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow relative overflow-hidden",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-slate-100 dark:bg-slate-700 overflow-hidden flex-shrink-0 border border-slate-100 dark:border-slate-700",children:a.produk?.lokasi_gambar?e.jsx("img",{src:a.produk.lokasi_gambar_url,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full text-slate-400 text-xs",children:"No Img"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-lg",children:a.produk?.nama}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-0.5 space-y-1",children:a.produk?.kategori_input==="id_server"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["ID: ",a.game_id," â€¢ Server: ",a.server_id]}),a.catatan&&e.jsxs("p",{className:"italic",children:["Catatan: ",a.catatan]})]}):e.jsxs("p",{children:["Catatan: ",a.catatan]})})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border ${j(a.status)}`,children:a.status==="failed"?"ditolak":a.status})]}),a.status==="failed"&&a.alasan_penolakan&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50/50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/30",children:[e.jsx("p",{className:"text-xs font-bold text-red-800 dark:text-red-400 mb-1 uppercase tracking-wide",children:"Alasan Penolakan:"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400/80",children:a.alasan_penolakan})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-4 pt-4 border-t border-slate-50 dark:border-slate-700",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Tanggal"}),e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:new Date(a.created_at).toLocaleDateString("id-ID")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Jumlah"}),e.jsxs("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[a.kuantitas,"x"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase text-right leading-none mb-1",children:"Total Harga"}),e.jsxs("p",{className:"text-lg font-bold text-primary-600 dark:text-primary-400 leading-none",children:["Rp ",a.total_harga?.toLocaleString("id-ID")]})]})]}),a.status==="paid"&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700/50 flex flex-wrap gap-2 justify-end",children:[e.jsxs("a",{href:`/invoice/${a.id}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-4 py-2 text-xs font-bold text-slate-700 bg-white border border-slate-200 hover:bg-slate-50 dark:text-slate-200 dark:bg-slate-800 dark:border-slate-600 dark:hover:bg-slate-700 rounded-lg transition-colors shadow-sm active:scale-95",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Cetak Nota"]}),e.jsxs(d,{size:"sm",onClick:()=>f(a.produk_id),className:"gap-2 shrink-0",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Beri Ulasan"]})]})]})]})},a.id))}):e.jsxs("div",{className:"p-12 text-center bg-white dark:bg-slate-800 rounded-2xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“­"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Belum ada pesanan"}),e.jsx(N,{href:"/",className:"inline-block mt-4 text-primary-600 dark:text-primary-400 hover:text-primary-700 font-medium",children:"Mulai Belanja â†’"})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl border border-slate-200 dark:border-slate-700 animate-slide-up",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Beri Ulasan"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Bagaimana pengalaman belanja Anda untuk produk ini?"}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(a=>e.jsx("button",{type:"button",onClick:()=>o(a),className:`p-2 transition-transform hover:scale-110 focus:outline-none ${i>=a?"text-amber-400":"text-slate-300 dark:text-slate-600"}`,children:e.jsx("svg",{className:"w-10 h-10",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},a))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Tulis Pengalaman Anda (Opsional)"}),e.jsx("textarea",{rows:4,value:c,onChange:a=>x(a.target.value),placeholder:"Pesanan masuk super cepat! Recommended banget...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 text-slate-900 dark:text-white focus:bg-white dark:focus:bg-slate-800 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all resize-none shadow-sm",maxLength:1e3})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>s(!1),className:"flex-1 justify-center",children:"Batal"}),e.jsx(d,{type:"submit",disabled:m,className:"flex-1 justify-center relative",children:m?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Mengirim..."]}):"Kirim Ulasan"})]})]})]})})})]})}export{P as default};
